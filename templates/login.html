{% extends "base.html" %}

{% block content %}
<!-- ...existing code... -->

<!-- MODAL EMAIL REQUIS -->
{% if show_email_modal %}
<div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; display: flex; justify-content: center; align-items: center;">
    <div style="background: white; padding: 30px; border-radius: 8px; width: 400px; max-width: 90%; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">
        <h3 style="margin-top: 0; color: #d9534f;">Email Manquant</h3>
        <p>Pour des raisons de sécurité et de contact, vous devez renseigner une adresse email valide pour accéder à votre compte.</p>
        
        <form method="post" action="">
            {% csrf_token %}
            <!-- Ces champs cachés permettent de reconnecter l'utilisateur directement -->
            <input type="hidden" name="username" value="{{ username }}">
            <input type="hidden" name="password" value="{{ password }}">
            <input type="hidden" name="update_email" value="true">
            
            <div style="margin-bottom: 20px;">
                <label for="email_input" style="display:block; margin-bottom:5px; font-weight:bold;">Votre Email :</label>
                <input type="email" id="email_input" name="email" required placeholder="exemple@domaine.com" 
                       style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;">
            </div>
            
            <button type="submit" style="background: #0275d8; color: white; border: none; padding: 12px 20px; border-radius: 4px; cursor: pointer; width: 100%; font-size: 16px;">
                Enregistrer et Connexion
            </button>
        </form>
    </div>
</div>
{% endif %}

<!-- ...existing code... -->
{% endblock %}